"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=(()=>{function a(b,c){for(var i=0,d;i<c.length;i++){d=c[i];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(b,d.key,d)}}return(b,c,d)=>{if(c)a(b.prototype,c);if(d)a(b,d);return b}})(),_fs=require("fs"),_fs2=_interopRequireDefault(_fs);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}var JSONProcessor=function(){function a(){_classCallCheck(this,a)}_createClass(a,null,[{key:"processRaw",value:(b,c)=>{var d=Object.keys(b),e=void 0;d.forEach(f=>{var g=b[f];e=c.createIndex(f,g)});return e}},{key:"processFiles",value:(b,c)=>{var d=void 0,e=void 0,f=void 0;try{b.forEach(g=>{var h=g.mimetype.toLowerCase();f=process.cwd()+"/uploads/"+g.filename;if(h==="application/json"){var j={encoding:"utf-8"};d=_fs2.default.readFileSync(f,j);d=d.toString();try{d=JSON.parse(d);e=c.createIndex(g.filename,d)}catch(error){throw new Error("Error: invalid json file")}}else{throw new Error("invalid file: upload json file")}})}catch(error){e=error.message}return e}}]);return a}();exports.default=JSONProcessor;